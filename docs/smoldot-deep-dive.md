# Smoldot Deep Dive: Architecture and Internals

## Overview

Smoldot is a lightweight alternative client for Substrate-based blockchains, designed specifically for environments where full nodes are impractical. It provides the essential functionality needed to interact with blockchains while maintaining a minimal footprint suitable for browsers, mobile apps, and embedded systems.

## Core Components Architecture

### 1. Multi-Component Structure
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Smoldot Ecosystem                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  smoldot-light  â”‚  â”‚     smoldot     â”‚  â”‚smoldot-full-nodeâ”‚ â”‚
â”‚  â”‚      -js        â”‚  â”‚      (lib)      â”‚  â”‚   (prototype)   â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚ â€¢ WASM Client   â”‚  â”‚ â€¢ Rust Primitiv â”‚  â”‚ â€¢ Full Node     â”‚ â”‚
â”‚  â”‚ â€¢ Browser/Node  â”‚  â”‚ â€¢ Core Logic    â”‚  â”‚ â€¢ Work in Prog  â”‚ â”‚
â”‚  â”‚ â€¢ JS/TS API     â”‚  â”‚ â€¢ Unopinionated â”‚  â”‚ â€¢ CLI Binary    â”‚ â”‚
â”‚  â”‚ â€¢ Main Focus    â”‚  â”‚ â€¢ Building Blockâ”‚  â”‚ â€¢ Experimental  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                       â–²                       â–²      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                 â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              smoldot-light (Rust base)                 â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ â€¢ Platform-agnostic light client library               â”‚   â”‚
â”‚  â”‚ â€¢ Foundation for smoldot-light-js                      â”‚   â”‚
â”‚  â”‚ â€¢ Semi-stable API                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Internal Module Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Smoldot Core (lib/src/)                      â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   Network   â”‚  â”‚   Executor  â”‚  â”‚    Chain    â”‚              â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚              â”‚
â”‚  â”‚ â€¢ libp2p    â”‚  â”‚ â€¢ WASM VM   â”‚  â”‚ â€¢ Blocks    â”‚              â”‚
â”‚  â”‚ â€¢ Protocols â”‚  â”‚ â€¢ Runtime   â”‚  â”‚ â€¢ Finality  â”‚              â”‚
â”‚  â”‚ â€¢ Codec     â”‚  â”‚ â€¢ Host Fns  â”‚  â”‚ â€¢ Fork Tree â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                 â”‚                 â”‚                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚    Sync     â”‚  â”‚    Trie     â”‚  â”‚ Transactionsâ”‚              â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚              â”‚
â”‚  â”‚ â€¢ All Forks â”‚  â”‚ â€¢ Merkle    â”‚  â”‚ â€¢ Pool      â”‚              â”‚
â”‚  â”‚ â€¢ Warp Sync â”‚  â”‚ â€¢ Proofs    â”‚  â”‚ â€¢ Validate  â”‚              â”‚
â”‚  â”‚ â€¢ Parachain â”‚  â”‚ â€¢ Storage   â”‚  â”‚ â€¢ Light Poolâ”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                 â”‚                 â”‚                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   Header    â”‚  â”‚  JSON-RPC   â”‚  â”‚   Verify    â”‚              â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚              â”‚
â”‚  â”‚ â€¢ BABE      â”‚  â”‚ â€¢ Methods   â”‚  â”‚ â€¢ AURA      â”‚              â”‚
â”‚  â”‚ â€¢ GRANDPA   â”‚  â”‚ â€¢ Service   â”‚  â”‚ â€¢ BABE      â”‚              â”‚
â”‚  â”‚ â€¢ AURA      â”‚  â”‚ â€¢ Parser    â”‚  â”‚ â€¢ Inherents â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deep Dive: WASM Execution Engine

### Virtual Machine Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Smoldot WASM Execution Flow                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 Live Substrate Chain                        â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚  â”‚   Runtime   â”‚    â”‚   Storage   â”‚    â”‚   Metadata  â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ WASM Blob   â”‚    â”‚   Proofs    â”‚    â”‚ & Version   â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ (Zstd compressed)â”‚            â”‚    â”‚             â”‚     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                    â”‚                    â”‚           â”‚
â”‚           â–¼                    â–¼                    â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Smoldot Light Client                           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”‚            WASM Runtime Loader                          â”‚ â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”‚ 1. Download Runtime Blob via Storage Proof             â”‚ â”‚
â”‚  â”‚  â”‚    â€¢ Verify cryptographic proof                        â”‚ â”‚
â”‚  â”‚  â”‚    â€¢ Decompress Zstd if needed                         â”‚ â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”‚ 2. Parse WASM Module                                    â”‚ â”‚
â”‚  â”‚  â”‚    â€¢ Validate WASM format                              â”‚ â”‚
â”‚  â”‚  â”‚    â€¢ Extract exports (runtime calls)                   â”‚ â”‚
â”‚  â”‚  â”‚    â€¢ Identify imports (host functions)                 â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                           â”‚                               â”‚ â”‚
â”‚  â”‚                           â–¼                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”‚             Virtual Machine Engine                     â”‚ â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Interpreter â”‚    â”‚ JIT Compilerâ”‚                   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   (wasmi)   â”‚    â”‚ (wasmtime)  â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚             â”‚    â”‚  (optional) â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Safe      â”‚    â”‚ â€¢ Fast      â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Slow      â”‚    â”‚ â€¢ Complex   â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Universal â”‚    â”‚ â€¢ Platform  â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                           â”‚                               â”‚ â”‚
â”‚  â”‚                           â–¼                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”‚              Host Functions Interface                  â”‚ â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ ext_storage_get       â€¢ ext_crypto_secp256k1_*       â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ ext_storage_set       â€¢ ext_crypto_sr25519_*         â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ ext_storage_root      â€¢ ext_crypto_ed25519_*         â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ ext_hashing_*         â€¢ ext_misc_*                   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ ext_trie_*            â€¢ ext_allocator_*              â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   Runtime Call Results                     â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â€¢ State Root Hash      â€¢ Storage Changes                   â”‚ â”‚
â”‚  â”‚ â€¢ Extrinsic Results    â€¢ Event Logs                        â”‚ â”‚
â”‚  â”‚ â€¢ Runtime Version      â€¢ Metadata Updates                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Runtime Call Lifecycle
```
User Transaction/Query
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   JSON-RPC      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Request       â”‚â”€â”€â”€â–ºâ”‚  Method Router  â”‚
â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ state_call    â”‚    â”‚ â€¢ Validate      â”‚
â”‚ â€¢ author_submit â”‚    â”‚ â€¢ Route         â”‚
â”‚ â€¢ chain_getBlockâ”‚    â”‚ â€¢ Transform     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Runtime Call    â”‚
                    â”‚ Preparation     â”‚
                    â”‚                 â”‚
                    â”‚ â€¢ Encode args   â”‚
                    â”‚ â€¢ Setup memory  â”‚
                    â”‚ â€¢ Prepare state â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WASM VM Execution                         â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Memory    â”‚    â”‚   Stack     â”‚    â”‚ Host Calls  â”‚      â”‚
â”‚  â”‚  Manager    â”‚â—„â”€â”€â–ºâ”‚  Manager    â”‚â—„â”€â”€â–ºâ”‚  Handler    â”‚      â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚      â”‚
â”‚  â”‚ â€¢ Allocate  â”‚    â”‚ â€¢ Call      â”‚    â”‚ â€¢ Storage   â”‚      â”‚
â”‚  â”‚ â€¢ Deallocateâ”‚    â”‚ â€¢ Return    â”‚    â”‚ â€¢ Crypto    â”‚      â”‚
â”‚  â”‚ â€¢ Track     â”‚    â”‚ â€¢ Exception â”‚    â”‚ â€¢ Trie      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                    â”‚                    â”‚         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                              â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Runtime Function Execution                  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Core_version()           â”Œâ”€ Core_execute_block()         â”‚ â”‚
â”‚  â”‚ Metadata_metadata()      â”‚  BlockBuilder_apply_extrinsic()â”‚ â”‚
â”‚  â”‚ RuntimeApi_impl_*()      â”‚  TaggedTransactionQueue_*()   â”‚ â”‚
â”‚  â”‚                         â”‚                               â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚           State Transition Function (STF)            â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                                                      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  new_state = f(old_state, extrinsics, inherents)    â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                                                      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Validate transactions                              â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Execute pallet logic                              â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Update storage                                     â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Emit events                                        â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Calculate new state root                          â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Result         â”‚
                    â”‚  Processing     â”‚
                    â”‚                 â”‚
                    â”‚ â€¢ Decode output â”‚
                    â”‚ â€¢ Extract logs  â”‚
                    â”‚ â€¢ Update cache  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Response      â”‚
                    â”‚   Formation     â”‚
                    â”‚                 â”‚
                    â”‚ â€¢ JSON format   â”‚
                    â”‚ â€¢ Error handle  â”‚
                    â”‚ â€¢ Send to user  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Consensus Algorithm Support

### Supported Consensus Mechanisms
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Smoldot Consensus Support                        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      BABE                                   â”‚ â”‚
â”‚  â”‚           (Blind Assignment for Blockchain Extension)       â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚ â”‚    Epoch    â”‚  â”‚    Slot     â”‚  â”‚   Block     â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ Management  â”‚  â”‚ Validation  â”‚  â”‚ Production  â”‚          â”‚ â”‚
â”‚  â”‚ â”‚             â”‚  â”‚             â”‚  â”‚             â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Duration  â”‚  â”‚ â€¢ VRF Check â”‚  â”‚ â€¢ Primary   â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Authority â”‚  â”‚ â€¢ Authority â”‚  â”‚ â€¢ Secondary â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Randomnessâ”‚  â”‚ â€¢ Threshold â”‚  â”‚ â€¢ Fallback  â”‚          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     GRANDPA                                 â”‚ â”‚
â”‚  â”‚           (GHOST-based Recursive Ancestor Deriving         â”‚ â”‚
â”‚  â”‚                 Prefix Agreement)                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚ â”‚  Finality   â”‚  â”‚   Voting    â”‚  â”‚    Commit   â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ Detection   â”‚  â”‚   Process   â”‚  â”‚ Verificationâ”‚          â”‚ â”‚
â”‚  â”‚ â”‚             â”‚  â”‚             â”‚  â”‚             â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Round     â”‚  â”‚ â€¢ Prevote   â”‚  â”‚ â€¢ 2/3+ Rule â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Validator â”‚  â”‚ â€¢ Precommit â”‚  â”‚ â€¢ Chain     â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Authority â”‚  â”‚ â€¢ Signature â”‚  â”‚ â€¢ Safety    â”‚          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      AURA                                   â”‚ â”‚
â”‚  â”‚              (Authority Round)                              â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚ â”‚   Round     â”‚  â”‚ Authority   â”‚  â”‚   Block     â”‚          â”‚ â”‚
â”‚  â”‚ â”‚  Robin      â”‚  â”‚   List      â”‚  â”‚ Validation  â”‚          â”‚ â”‚
â”‚  â”‚ â”‚             â”‚  â”‚             â”‚  â”‚             â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Slot Time â”‚  â”‚ â€¢ Rotation  â”‚  â”‚ â€¢ Signature â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Duration  â”‚  â”‚ â€¢ Selection â”‚  â”‚ â€¢ Timing    â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Authority â”‚  â”‚ â€¢ Identity  â”‚  â”‚ â€¢ Authority â”‚          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Network Layer Architecture

### libp2p Integration
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Smoldot Network Stack                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   Application Layer                         â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚ â”‚   Sync      â”‚  â”‚    RPC      â”‚  â”‚ Transaction â”‚          â”‚ â”‚
â”‚  â”‚ â”‚  Protocol   â”‚  â”‚  Requests   â”‚  â”‚   Gossip    â”‚          â”‚ â”‚
â”‚  â”‚ â”‚             â”‚  â”‚             â”‚  â”‚             â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Block Req â”‚  â”‚ â€¢ State Req â”‚  â”‚ â€¢ Pool      â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Warp Sync â”‚  â”‚ â€¢ Call Proofâ”‚  â”‚ â€¢ Broadcast â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Grandpa   â”‚  â”‚ â€¢ Storage   â”‚  â”‚ â€¢ Validate  â”‚          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Protocol Layer                             â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚ â”‚  Multistreamâ”‚  â”‚   Yamux     â”‚  â”‚    Noise    â”‚          â”‚ â”‚
â”‚  â”‚ â”‚   Select    â”‚  â”‚ Multiplexer â”‚  â”‚   Crypto    â”‚          â”‚ â”‚
â”‚  â”‚ â”‚             â”‚  â”‚             â”‚  â”‚             â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Negotiate â”‚  â”‚ â€¢ Streams   â”‚  â”‚ â€¢ Handshake â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Version   â”‚  â”‚ â€¢ Flow Ctrl â”‚  â”‚ â€¢ Encryptionâ”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Fallback  â”‚  â”‚ â€¢ Backpress â”‚  â”‚ â€¢ Identity  â”‚          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 Transport Layer                             â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚ â”‚  WebSocket  â”‚  â”‚    TCP      â”‚  â”‚   WebRTC    â”‚          â”‚ â”‚
â”‚  â”‚ â”‚             â”‚  â”‚             â”‚  â”‚             â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Browser   â”‚  â”‚ â€¢ Native    â”‚  â”‚ â€¢ P2P       â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Proxy     â”‚  â”‚ â€¢ Direct    â”‚  â”‚ â€¢ NAT       â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Secure    â”‚  â”‚ â€¢ Fast      â”‚  â”‚ â€¢ Firewall  â”‚          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Peer Discovery and Management
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Peer Management Flow                         â”‚
â”‚                                                                  â”‚
â”‚  Bootstrap Nodes                                                 â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚    Kademlia     â”‚â”€â”€â”€â–ºâ”‚   Peer Store    â”‚                     â”‚
â”‚  â”‚      DHT        â”‚    â”‚                 â”‚                     â”‚
â”‚  â”‚                 â”‚    â”‚ â€¢ Addresses     â”‚                     â”‚
â”‚  â”‚ â€¢ Find Nodes    â”‚    â”‚ â€¢ Reputation    â”‚                     â”‚
â”‚  â”‚ â€¢ Find Content  â”‚    â”‚ â€¢ Capabilities  â”‚                     â”‚
â”‚  â”‚ â€¢ Store Records â”‚    â”‚ â€¢ Connection    â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚         â”‚                        â”‚                              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                                  â”‚                        â”‚     â”‚
â”‚                                  â–¼                        â”‚     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚               Connection Manager                        â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚ â”‚ Connection  â”‚  â”‚ Connection  â”‚  â”‚ Connection  â”‚       â”‚   â”‚
â”‚  â”‚ â”‚ Establish   â”‚  â”‚ Maintain    â”‚  â”‚ Cleanup     â”‚       â”‚   â”‚
â”‚  â”‚ â”‚             â”‚  â”‚             â”‚  â”‚             â”‚       â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Handshake â”‚  â”‚ â€¢ Health    â”‚  â”‚ â€¢ Timeout   â”‚       â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Auth      â”‚  â”‚ â€¢ Ping/Pong â”‚  â”‚ â€¢ Error     â”‚       â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Upgrade   â”‚  â”‚ â€¢ Traffic   â”‚  â”‚ â€¢ Shutdown  â”‚       â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â”‚                        â”‚     â”‚
â”‚                                  â–¼                        â”‚     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚               Protocol Selection                        â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ /ipfs/ping/1.0.0                                       â”‚   â”‚
â”‚  â”‚ /ipfs/id/1.0.0                                         â”‚   â”‚
â”‚  â”‚ /<genesis_hash>/sync/2                                 â”‚   â”‚
â”‚  â”‚ /<genesis_hash>/light/2                                â”‚   â”‚
â”‚  â”‚ /<genesis_hash>/kad                                    â”‚   â”‚
â”‚  â”‚ /<genesis_hash>/transactions/1                         â”‚   â”‚
â”‚  â”‚ /<genesis_hash>/block-announces/1                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Synchronization Strategies

### Light Client Sync Methods
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Smoldot Sync Strategies                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Warp Sync                                â”‚ â”‚
â”‚  â”‚              (Fast Initial Sync)                           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Genesis â”€â”€â”€â”€â”€â”€â–º Checkpoint â”€â”€â”€â”€â”€â”€â–º Latest                 â”‚ â”‚
â”‚  â”‚     â”‚                â”‚                 â”‚                   â”‚ â”‚
â”‚  â”‚     â–¼                â–¼                 â–¼                   â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ â”‚
â”‚  â”‚ â”‚Authorityâ”‚    â”‚ Finalityâ”‚       â”‚ Current â”‚              â”‚ â”‚
â”‚  â”‚ â”‚  Set    â”‚    â”‚ Proof   â”‚       â”‚  Head   â”‚              â”‚ â”‚
â”‚  â”‚ â”‚         â”‚    â”‚         â”‚       â”‚         â”‚              â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ GRAND â”‚    â”‚ â€¢ GRAND â”‚       â”‚ â€¢ Block â”‚              â”‚ â”‚
â”‚  â”‚ â”‚   PA    â”‚    â”‚   PA    â”‚       â”‚ â€¢ State â”‚              â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ BABE  â”‚    â”‚ â€¢ Commitâ”‚       â”‚ â€¢ Peers â”‚              â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  All Forks Sync                             â”‚ â”‚
â”‚  â”‚                (Normal Operation)                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚  â”‚   Chain     â”‚    â”‚   Pending   â”‚    â”‚   Verify    â”‚     â”‚ â”‚
â”‚  â”‚  â”‚   Head      â”‚    â”‚   Blocks    â”‚    â”‚ & Execute   â”‚     â”‚ â”‚
â”‚  â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Best      â”‚â”€â”€â”€â–ºâ”‚ â€¢ Queue     â”‚â”€â”€â”€â–ºâ”‚ â€¢ Headers   â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Finalized â”‚    â”‚ â€¢ Priority  â”‚    â”‚ â€¢ Bodies    â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Fork Tree â”‚    â”‚ â€¢ Ordering  â”‚    â”‚ â€¢ Import    â”‚     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 Parachain Sync                              â”‚ â”‚
â”‚  â”‚              (Relay Chain Aware)                           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚ â”‚ Relay Chain â”‚                        â”‚ Parachain   â”‚     â”‚ â”‚
â”‚  â”‚ â”‚    Sync     â”‚ â”€â”€â”€â”€Inclusion Proofâ”€â”€â–º â”‚    Sync     â”‚     â”‚ â”‚
â”‚  â”‚ â”‚             â”‚                        â”‚             â”‚     â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Finality  â”‚                        â”‚ â€¢ Para      â”‚     â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Validator â”‚                        â”‚   Blocks    â”‚     â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Authority â”‚                        â”‚ â€¢ Validationâ”‚     â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Light Client vs Full Node Comparison

### Capabilities Matrix
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Feature Comparison                             â”‚
â”‚                                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚     Feature     â”‚   Full Node     â”‚   Light Client  â”‚ Smoldot â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Block Storage   â”‚ âœ… Complete      â”‚ âŒ None         â”‚ âŒ None  â”‚ â”‚
â”‚ â”‚ State Storage   â”‚ âœ… Complete      â”‚ âŒ None         â”‚ âŒ None  â”‚ â”‚
â”‚ â”‚ Runtime Execute â”‚ âœ… Native+WASM   â”‚ âœ… WASM Only    â”‚ âœ… WASM  â”‚ â”‚
â”‚ â”‚ Network Sync    â”‚ âœ… Full P2P      â”‚ âœ… Light P2P    â”‚ âœ… Light â”‚ â”‚
â”‚ â”‚ Transaction Poolâ”‚ âœ… Full Pool     â”‚ âœ… Light Pool   â”‚ âœ… Light â”‚ â”‚
â”‚ â”‚ Consensus Part. â”‚ âœ… Validator     â”‚ âŒ Observer     â”‚ âŒ Observâ”‚ â”‚
â”‚ â”‚ Finality Proof  â”‚ âœ… Participant   â”‚ âœ… Verify Only  â”‚ âœ… Verifyâ”‚ â”‚
â”‚ â”‚ Historical Data â”‚ âœ… Archive       â”‚ âŒ None         â”‚ âŒ None  â”‚ â”‚
â”‚ â”‚ State Queries   â”‚ âœ… Direct        â”‚ âœ… Via Proofs   â”‚ âœ… Proofsâ”‚ â”‚
â”‚ â”‚ Resource Usage  â”‚ ğŸ”´ High          â”‚ ğŸŸ¢ Low          â”‚ ğŸŸ¢ Low   â”‚ â”‚
â”‚ â”‚ Setup Time      â”‚ ğŸ”´ Hours         â”‚ ğŸŸ¢ Seconds      â”‚ ğŸŸ¢ Secondâ”‚ â”‚
â”‚ â”‚ Browser Support â”‚ âŒ No            â”‚ âœ… Yes          â”‚ âœ… Yes   â”‚ â”‚
â”‚ â”‚ Mobile Support  â”‚ âŒ No            â”‚ âœ… Yes          â”‚ âœ… Yes   â”‚ â”‚
â”‚ â”‚ Trust Model     â”‚ ğŸŸ¢ Trustless     â”‚ ğŸŸ¡ Semi-Trust   â”‚ ğŸŸ¡ Semi  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Performance Characteristics
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Performance Profile                           â”‚
â”‚                                                                  â”‚
â”‚  Memory Usage (MB)                                               â”‚
â”‚                                                                  â”‚
â”‚  1000 â”¼                                                          â”‚
â”‚       â”‚                                                          â”‚
â”‚   800 â”¼                                                          â”‚
â”‚       â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Full Node                                   â”‚
â”‚   600 â”¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚       â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚   400 â”¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚       â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚   200 â”¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚       â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆ                                     â”‚
â”‚     0 â”¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆ    â–ˆâ–ˆ Smoldot                       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                     â”‚         â”‚                                  â”‚
â”‚                 Storage   Execution                              â”‚
â”‚                                                                  â”‚
â”‚  Network Bandwidth (Mbps)                                       â”‚
â”‚                                                                  â”‚
â”‚   100 â”¼                                                          â”‚
â”‚       â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Full Node (Sync)                           â”‚
â”‚    80 â”¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚       â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚    60 â”¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚       â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚    40 â”¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚       â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚
â”‚    20 â”¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ           â–ˆâ–ˆâ–ˆâ–ˆ Smoldot (Warp)              â”‚
â”‚       â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ           â–ˆâ–ˆâ–ˆâ–ˆ                              â”‚
â”‚     0 â”¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆ Smoldot (Normal)       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                     â”‚         â”‚                                  â”‚
â”‚                Initial    Operational                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Model and Attack Vectors

### Trust and Verification Model
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Smoldot Security Model                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Trust Boundaries                           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚ â”‚   Full      â”‚    â”‚   Crypto    â”‚    â”‚   Network   â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Nodes     â”‚    â”‚ Primitives  â”‚    â”‚ Consensus   â”‚       â”‚ â”‚
â”‚  â”‚ â”‚             â”‚    â”‚             â”‚    â”‚             â”‚       â”‚ â”‚
â”‚  â”‚ â”‚ ğŸŸ¡ Partiallyâ”‚    â”‚ ğŸŸ¢ Trusted   â”‚    â”‚ ğŸŸ¢ Trusted   â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Trusted   â”‚    â”‚             â”‚    â”‚             â”‚       â”‚ â”‚
â”‚  â”‚ â”‚             â”‚    â”‚ â€¢ Ed25519   â”‚    â”‚ â€¢ GRANDPA   â”‚       â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Honest    â”‚    â”‚ â€¢ Sr25519   â”‚    â”‚ â€¢ BABE      â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Majority  â”‚    â”‚ â€¢ Blake2    â”‚    â”‚ â€¢ Finality  â”‚       â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Storage   â”‚    â”‚ â€¢ Merkle    â”‚    â”‚ â€¢ 2/3 Rule  â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Proofs    â”‚    â”‚   Trees     â”‚    â”‚ â€¢ Authority â”‚       â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   Attack Vectors                            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚ â”‚   Eclipse   â”‚    â”‚ Long Range  â”‚    â”‚   Invalid   â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Attack    â”‚    â”‚   Attack    â”‚    â”‚   Block     â”‚       â”‚ â”‚
â”‚  â”‚ â”‚             â”‚    â”‚             â”‚    â”‚ Propagation â”‚       â”‚ â”‚
â”‚  â”‚ â”‚ ğŸ”´ High Risk â”‚    â”‚ ğŸŸ¡ Med Risk  â”‚    â”‚ ğŸŸ¡ Med Risk  â”‚       â”‚ â”‚
â”‚  â”‚ â”‚             â”‚    â”‚             â”‚    â”‚             â”‚       â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Network   â”‚    â”‚ â€¢ History   â”‚    â”‚ â€¢ Spam      â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Isolation â”‚    â”‚   Rewrite   â”‚    â”‚ â€¢ DoS       â”‚       â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Peer      â”‚    â”‚ â€¢ Weak      â”‚    â”‚ â€¢ Resource  â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Control   â”‚    â”‚   Subj.     â”‚    â”‚   Exhaust   â”‚       â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚ â”‚   Finality  â”‚    â”‚ Nothing at  â”‚    â”‚   State     â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Stall     â”‚    â”‚   Stake     â”‚    â”‚ Bloat       â”‚       â”‚ â”‚
â”‚  â”‚ â”‚             â”‚    â”‚             â”‚    â”‚             â”‚       â”‚ â”‚
â”‚  â”‚ â”‚ ğŸŸ¡ Med Risk  â”‚    â”‚ ğŸŸ¡ Med Risk  â”‚    â”‚ ğŸŸ¢ Low Risk  â”‚       â”‚ â”‚
â”‚  â”‚ â”‚             â”‚    â”‚             â”‚    â”‚             â”‚       â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Authority â”‚    â”‚ â€¢ Light     â”‚    â”‚ â€¢ Proof     â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Failure   â”‚    â”‚   Client    â”‚    â”‚   Size      â”‚       â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Network   â”‚    â”‚ â€¢ No Slash  â”‚    â”‚ â€¢ Bandwidth â”‚       â”‚ â”‚
â”‚  â”‚ â”‚   Partition â”‚    â”‚ â€¢ Social    â”‚    â”‚ â€¢ Memory    â”‚       â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Conclusion

Smoldot represents a sophisticated approach to light client architecture that balances:

- **Functionality**: Core blockchain interaction capabilities
- **Performance**: Minimal resource footprint
- **Security**: Cryptographic verification with known trade-offs  
- **Portability**: Cross-platform WASM-based execution
- **Usability**: Simple APIs for developers

Its modular design allows it to serve as both a standalone light client and as the execution engine for specialized tools like Chopsticks, demonstrating the power of well-architected blockchain infrastructure components.